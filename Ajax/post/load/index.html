<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>主页面</title>
  <link rel="stylesheet" href="bootstrap.css">
  <link rel="stylesheet" href="../nprogress.css">
  <style>
    .loading {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      bottom: 0;
      right: 0;
      background-color: rgba(0, 0, 0, .6);
      font-size: 30px;
    }
  </style>
  <script src="../nprogress.js"></script>
</head>
<body>
  <div class="container pt-4">
    <h1>会员中心</h1>
    <hr>
    <div class="row">
      <aside class="col-md-3">
        <div class="list-group">
          <!-- 该项目有三个页面 -->
          <!-- 为了避免多页面情形下的代码重复，可以利用 load() 方法，将重复的部分（例如导航栏）放入单独的文件 -->
          <a class="list-group-item list-group-item-action" href="index.html">我的资料</a>
          <a class="list-group-item list-group-item-action" href="cart.html">我的购物车</a>
          <a class="list-group-item list-group-item-action" href="orders.html">我的订单</a>
        </div>
      </aside>
      <main id="main" class="col-md-9">
        <h2>我的个人资料</h2>
        <hr>
      </main>
    </div>
  </div>
  <div class="loading">正在玩命加载中...</div>
  <script src="../jquery.js"></script>
  <script>

    // 使用入口函数的作用：有同一个独立的作用域，确保页面加载完成执行

    $(function ($) { // 此时这个参数$是局部变量，减少作用域链
      // $(document)
      //   .ajaxStart(function () {
      //     // 只要有 ajax 请求发生 就会执行
      //     $('.loading').fadeIn()
      //     // 显示加载提示
      //     console.log('注意即将要开始请求了')
      //   })
      //   .ajaxStop(function () {
      //     // 只要有 ajax 请求结束 就会执行
      //     $('.loading').fadeOut()
      //     // 结束提示
      //     console.log('请求结束了')
      //   })

      $(document)
        .ajaxStart(function () {
          NProgress.start()
        })
        .ajaxStop(function () {
          NProgress.done()
        })

      // 有一个独立的作用域，顺便确保页面加载完成执行
      $('.list-group-item').on('click', function () {
        var url = $(this).attr('href')

        // load()方法的传递方式根据参数data来自动指定。如果没有参数传递，则采用GET方式传递；反之，则会自动转换为POST方法。
        // 在load()方法中，无论Ajax请求是否成功，只要当请求完成(complete)后，回调函数(callback)就被触发。

        // jQuery的load方法，常用一个url 参数即可
        // load() 方法从服务器加载数据，并把返回的数据放入被选元素中（将远程的HTML代码插入到DOM中）
        // 把 jQuery 选择器添加到 URL 参数。
        $('#main').load(url + ' #main > *') // 加上的是选择器
        return false


        // $.load()  $.get()  $.Ajax()
        /**
         * 
          这些方法提供了不同的抽象层。

          $.ajax()让您完全控制Ajax请求。如果其他方法没有满足您的需求，您应该使用它。

          $.get()执行Ajax GET请求。返回的数据（可以是任何数据）将传递给您的回调处理程序。

          $(selector).load()将执行Ajax GET请求并将设置所选返回数据的内容（应该是文本或HTML）。

          这取决于你应该使用哪种方法的情况。如果你想做简单的事情，就没有必要打扰$.ajax()。

          例如$.load()，如果返回的数据是JSON需要进一步处理，则不会使用。在这里你要么使用$.ajax()或$.get()。
         * 
         **/
      })
    })
  </script>
</body>
</html>
