<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>尝试找到一种可以发送不同源请求的方式</title>
  <!-- link 真正的定义：链入一个文档，通过 rel 属性申明链入的文档与当前文档之间的关系 -->
  <!-- <link rel="stylesheet" href="nprogress.css"> -->
</head>
<body>
  <!-- <img src="http://ww1.sinaimg.cn/large/006ThXL5ly1fj8w5i2onyj302u02umwz.jpg" alt=""> -->
  <script>

    // 请求一个不同源的地址实际上就是我们所说的跨域请求

    // 当前页面访问地址：http://day-12.io/12-cross-origin.html
    // 希望被请求的地址：http://locally.uieee.com/categories
    //
    // 校验目标：1 能发出去，2 能收回来

    // img link script iframe
    //
    // ## 1. img
    // 可以发送不同源地址之间的请求
    // 无法拿到响应结果
    // var img = new Image()
    // img.src = 'http://locally.uieee.com/categories'

    // ## 2. link
    // 可以发送不同源地址之间的请求
    // 无法拿到响应结果
    // var link = document.createElement('link')
    // link.rel = 'stylesheet'  // link的rel属性不能省略
    // link.href = 'http://locally.uieee.com/categories'
    // document.body.appendChild(link)

    // ## 3. script
    // 可以发送不同源地址之间的请求
    // 无法拿到响应结果
    // 借助于能够作为 JS 执行
    var script = document.createElement('script')
    script.src = 'http://localhost/Ajax/post/time2.php'
    document.body.appendChild(script) // 开始发起请求

    // 响应内容不能是直接的一段json数据，而是直接执行一个js函数，也就是cb的参数名 
    // 相当于请求的回调
    function foo (res) {  // 在time2.php的文件中得到的响应是通过回调函数得到的
      console.log(res)
    }

    /**
      首先在客户端注册一个回调函数, 然后把回调函数的名字传给服务器。此时，服务器先生成 json 数据。
      然后在服务端以 javascript 语法的方式，生成一个function , function 名字就是传递上来的参数（回调函数名）.
      最后将 json 数据直接以入参的方式，放置到 function 中，这样就生成了一段 js 语法的文档，返回给客户端。
      客户端浏览器，解析script标签，并执行返回的javascript文档，
      此时数据作为参数，传入到了客户端预先定义好的 callback 函数里。(动态执行回调函数)
    
    */

  </script>
</body>
</html>
