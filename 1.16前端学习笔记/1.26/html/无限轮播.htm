<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        *{
            margin: 0;
            padding: 0;
            list-style: none;
        }
        img{
            vertical-align: top;
        }
        #slider{
            width: 750px;
            height: 320px;
            border: 1px solid #ccc;
            padding: 10px;
            margin: 100px auto;
            position: relative;
        }
        #top{
            width: 100%;
            height: 100%;
            position: relative;
            overflow: hidden;
        }
        #top ul{
            width: 4500px;
            height: 100%;
            position: absolute;
            left: 0;
            top: 0;
        }
        #top ul li{
            width: 750px;
            height: 320px;
            float: left;
        }
        #slider ol{
            position: absolute;
            bottom: 10px;
            right: 10px;
        }
        ol li{
            width: 20px;
            height: 20px;
            background-color: darkgrey;
            display: inline-block;
            border-radius: 50%;
            margin-right: 3px;
            cursor:pointer;
        }
        li.current{
            background-color: orangered;
        }
    </style>
</head>
<body>
    <div id="slider">
        <div id="top">
            <ul id="ul">
                <li><img src="images/a1.png" alt=""></li>
                <li><img src="images/a2.png" alt=""></li>
                <li><img src="images/a3.png" alt=""></li>
                <li><img src="images/a4.png" alt=""></li>
                <li><img src="images/a1.png" alt=""></li>
            </ul>
        </div>
        <ol id="ol"></ol>
    </div>
    <script src="../js/my_func.js"></script>
    <script>
        var currentIndex=0,indicatorIndex=0;//第一个是图片，第二个是圆点
        //获取所有的li标签
        var Lis=$("ul").children;
        //要把第一张图片克隆一份放在最后的位置上
        $("ul").appendChild(Lis[0].cloneNode(true));
        //创建ol里的li
        for(var i=0;i<Lis.length;i++){
            var li=document.createElement("li");
            $("ol").appendChild(li);
        }
        //第一个选中
        $("ol").children[0].className="current";
        //拿到所有的ol里的li
        var olLis=$("ol").children;
        for(var j=0;j<olLis.length;j++){
            //自动滚 鼠标进入圆点的话也会滚动
            //监听鼠标进入圆点的事件
            (function(j){
                var li=olLis[j];
                li.onmouseover=function(){
                    for(var i=0;i<olLis.length-1;i++){//这层循环很重要
                        olLis[i].className='';
                    }
                    this.className="current";
                    //利用动画动起来
                    animation($("ul"),-(750*j),60);
                    currentIndex=indicatorIndex=j;
                };
            })(j);
        } 
        //自动轮播
        var time=setInterval(autoPlay,1000);
        //清除和设置定时器，当鼠标图片的话，就不应该再继续轮播了，出去再接着轮播
        $("slider").onmouseover=function(){
            clearInterval(time);
        }
        $("slider").onmouseout=function(){
            time=setInterval(autoPlay,1000);
        }
        function autoPlay(){
            //让ul滚动起来
            currentIndex++;
            if(currentIndex>Lis.length-1){
                //最后一张和第一张重合，因此要回到第二张
                $("ul").style.left=0;
                currentIndex=1;
            }
            animation($("ul"),-currentIndex*750,100);
            indicatorIndex++;
            if(indicatorIndex>olLis.length-1){
                indicatorIndex=0;
            }
            for(var i=0;i<Lis.length-1;i++){//这层循环很重要
                olLis[i].className='';
            }
            olLis[indicatorIndex].className="current";
        }
    </script>
</body>
</html>